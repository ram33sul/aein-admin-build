{"version":3,"file":"static/js/54.9f318b7d.chunk.js","mappings":"iMACA,EAA4B,6B,6BCgD5B,MA3BA,WAAsB,IAADA,EAEXC,GAAWC,EAAAA,EAAAA,MACjBC,GAAwDC,EAAAA,EAAAA,GAAqB,CACzEC,IAAK,eACPC,GAAAC,EAAAA,EAAAA,GAAAJ,EAAA,GAFMK,EAASF,EAAA,GAAEG,EAAcH,EAAA,GAAEI,EAAgBJ,EAAA,GAI7CK,EAQJ,QAR0BX,EAAY,OAATQ,QAAS,IAATA,OAAS,EAATA,EAAWI,KAAI,SAAAC,GAAsC,IAApCC,EAAGD,EAAHC,IAAKC,EAAMF,EAANE,OAAQC,EAAQH,EAARG,SAAUC,EAAMJ,EAANI,OACnE,MAAO,CACHC,GAAIJ,EAAIK,MAAM,IACdJ,OAAQA,EAAOI,MAAM,IACrBC,KAAM,IAAIC,KAAKL,GAAUM,iBACzBL,OAAQA,EAAS,SAAW,aAC5BM,QAAS,kBAAMtB,EAAS,yBAADuB,OAA0BV,GAAM,EAE/D,WAAE,IAAAd,EAAAA,EAAI,GAEN,OACIyB,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAiBC,SAEzBlB,GAAmBe,EAAAA,EAAAA,KAACI,EAAAA,EAAO,CAACC,MAAM,UAClCrB,GAAiBgB,EAAAA,EAAAA,KAACM,EAAAA,EAAY,CAACC,KAAK,qCACxCP,EAAAA,EAAAA,KAACQ,EAAAA,EAAK,CAACC,SAAU,CAAC,KAAM,SAAU,OAAQ,UAAWC,MAAOxB,KAGxE,C,uDC9CA,OAAgB,UAAY,iC,mBCiB5B,MAZA,SAAqBE,GAA6C,IAADuB,EAAAvB,EAA1CwB,KAAAA,OAAI,IAAAD,EAAG,OAAMA,EAAAE,EAAAzB,EAAEmB,KAAAA,OAAI,IAAAM,EAAG,YAAWA,EAC9CC,EAAMC,EAAQ,KACpB,OACIC,EAAAA,EAAAA,MAAA,OAAKf,UAAWC,EAAAA,UAAiBC,SAAA,EAC7BH,EAAAA,EAAAA,KAAA,OAAKc,IAAKA,EAAKG,IAAI,QAAQC,MAAO,CAACC,SAAUP,EAAMQ,UAAWR,MAC9DZ,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAAA,KAAagB,MAAO,CAACG,SAAUT,GAAMT,SAChDI,MAIjB,C,uDCfA,MAAwB,qBAAxB,EAAkD,kBAAlD,EAAyE,kBAAzE,EAAgG,kB,SCgDhG,MAtCA,SAAcnB,GAA4B,IAA1BsB,EAAKtB,EAALsB,MAAOD,EAAQrB,EAARqB,SAEnB,OACIO,EAAAA,EAAAA,MAAA,OAAKf,UAAWC,EAAaC,SAAA,EACzBH,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAUC,SAElBM,EAAStB,KAAI,SAAAmC,GACT,OACItB,EAAAA,EAAAA,KAAA,OAAmBC,UAAWC,EAAWgB,MAAO,CAACK,MAAM,GAADxB,OAAK,IAAIU,EAASe,OAAM,MAAMrB,SAC/EmB,GADKA,EAIlB,MAIJZ,EAAMvB,KAAI,SAAAsC,GACN,OACIzB,EAAAA,EAAAA,KAAA,OAA6BC,UAAWC,EAAWJ,QAAS2B,EAAK3B,QAAQK,SAEjEM,EAAStB,KAAI,SAAAmC,GAET,OACItB,EAAAA,EAAAA,KAAA,OAAyBC,UAAWC,EAAWgB,MAAO,CAACK,MAAM,GAADxB,OAAK,IAAIU,EAASe,OAAM,KAAKnB,MAAOoB,EAAKC,UAAWvB,SAC3GsB,EAAKH,IADAG,EAAKH,GAIvB,KATEG,EAAKhB,EAAS,IAahC,MAIhB,C,mECaA,IA1CA,SAAerB,GAAmF,IAA9ER,EAAGQ,EAAHR,IAAG+C,EAAAvC,EAAEwC,QAAAA,OAAO,IAAAD,EAAG,CAAEE,OAAQ,OAAMF,EAAAG,EAAA1C,EAAE2C,MAAAA,OAAK,IAAAD,GAAOA,EAE7DE,GAAkCC,EAAAA,EAAAA,UAAmB,MAAKC,GAAApD,EAAAA,EAAAA,GAAAkD,EAAA,GAAlDG,EAAQD,EAAA,GAAEE,EAAWF,EAAA,GAC7BG,GAA4BJ,EAAAA,EAAAA,UAA4B,MAAKK,GAAAxD,EAAAA,EAAAA,GAAAuD,EAAA,GAArDE,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GACvBG,GAAgCR,EAAAA,EAAAA,UAAkBF,GAAMW,GAAA5D,EAAAA,EAAAA,GAAA2D,EAAA,GAAhDE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GAC3BG,GAA8BZ,EAAAA,EAAAA,UAAmC,MAAKa,GAAAhE,EAAAA,EAAAA,GAAA+D,EAAA,GAA9DE,EAAMD,EAAA,GAAEE,EAASF,EAAA,GACzBG,GAAwChB,EAAAA,EAAAA,UAAkBF,GAAMmB,GAAApE,EAAAA,EAAAA,GAAAmE,EAAA,GAAxDE,EAAWD,EAAA,GAAEE,EAAcF,EAAA,GACnCG,GAAsCpB,EAAAA,EAAAA,WAAkB,GAAMqB,GAAAxE,EAAAA,EAAAA,GAAAuE,EAAA,GAAtDE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAE3BG,GAAUC,EAAAA,EAAAA,cAAY,WACxBN,GAAe,GACfR,GAAW,GACXY,GAAc,SAAAG,GAAI,OAAKA,CAAI,GAC/B,GAAE,IA0BF,OAxBAC,EAAAA,EAAAA,YAAU,WACN,IAAMC,EAASC,EAAAA,EAAAA,YAAAA,SAiBf,OAhBAd,EAAUa,GACPV,IACCW,EAAAA,EAAAA,GAAMlF,GAAGmF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACFnC,GAAO,IACVoC,YAAaH,EAAOI,SACrBC,MAAK,SAACC,GACL/B,EAAY+B,EAAIC,MAChBxB,GAAW,EACf,IAAGyB,OAAM,SAAC9B,GACFuB,EAAAA,EAAAA,SAAevB,KACfC,EAASD,GACTK,GAAW,GAEnB,IAGG,WACHiB,EAAOd,OAAO,6BAClB,CAEJ,GAAE,CAACI,EAAaI,IAET,CAAEpB,EAAUI,EAAOI,EAASc,EAAe,OAANV,QAAM,IAANA,OAAM,EAANA,EAAQA,OACxD,C","sources":["webpack://frontend/./src/components/fragments/PostsData/PostsData.module.css?6ea4","components/fragments/PostsData/PostsData.tsx","webpack://frontend/./src/components/general/ErrorMessage/ErrorMessage.module.css?4416","components/general/ErrorMessage/ErrorMessage.tsx","webpack://frontend/./src/components/general/Table/Table.module.css?3a69","components/general/Table/Table.tsx","customHooks/api.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"PostsData_container__61dTk\"};","import { useNavigate } from 'react-router-dom';\nimport useApi from '../../../customHooks/api';\nimport Table from '../../general/Table/Table';\nimport styles from './PostsData.module.css';\nimport Loading from '../../general/Loading/Loading';\nimport ErrorMessage from '../../general/ErrorMessage/ErrorMessage';\n\ninterface PostedData {\n    _id: string;\n    userId: string;\n    postedAt: Date;\n    status: boolean\n}\n\ninterface TableData {\n    id: string;\n    userId: string;\n    time: string | Date;\n    status: string\n    onClick: () => void\n}\n\nfunction PostsData() {\n\n    const navigate = useNavigate()\n    const [ postsData, postsDataError, postsDataLoading ] = useApi<PostedData[]>({\n        url: '/postsData'\n    })\n\n    const tableData: TableData[] = postsData?.map(({_id, userId, postedAt, status}) => {\n        return {\n            id: _id.slice(15),\n            userId: userId.slice(15),\n            time: new Date(postedAt).toLocaleString(),\n            status: status ? 'Active' : 'Not-active' ,\n            onClick: () => navigate(`/posts/postDetails?id=${_id}`)\n        }\n    }) ?? []\n    \n    return (\n        <div className={styles.container}>\n            {\n                postsDataLoading ? <Loading color='black'/> :\n                postsDataError ? <ErrorMessage text='Error while fetching posts data' /> :\n            <Table headings={[\"id\", \"userId\", \"time\", \"status\"]} datas={tableData} />}\n        </div>\n    )\n}\n\nexport default PostsData;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ErrorMessage_container__9e608\"};","import styles from './ErrorMessage.module.css';\nimport React from 'react'\ninterface props {\n    size?: string, \n    text?: string\n}\nfunction ErrorMessage({size = '20px', text = 'Try again'}: props){\n    const src = require(`../../../images/icons/error-red.png`);\n    return (\n        <div className={styles.container}>\n            <img src={src} alt='error' style={{maxWidth: size, maxHeight: size}}/>\n            <div className={styles.text} style={{fontSize: size}}>\n                {text}\n            </div>\n        </div>\n    )\n}\n\nexport default ErrorMessage;","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"Table_table__4XKHf\",\"tr\":\"Table_tr__ptnei\",\"th\":\"Table_th__KMoxr\",\"tb\":\"Table_tb__7hbub\"};","import { Keyable } from '../../../types/object';\nimport styles from './Table.module.css';\n\n\ntype Headings = string[];\ntype Datas = Keyable[];\n\ninterface Props {\n    datas: Datas;\n    headings: Headings;\n}\nfunction Table({datas, headings}: Props) {\n\n    return (\n        <div className={styles.table}>\n            <div className={styles.tr}>\n                {\n                    headings.map(heading => {\n                        return(\n                            <div key={heading} className={styles.th} style={{width: `${100/headings.length}%` }}>\n                                {heading}\n                            </div>\n                        )\n                    })\n                }\n            </div>\n            {\n                datas.map(list => {\n                    return(\n                        <div key={list[headings[0]]} className={styles.tr} onClick={list.onClick}>\n                            {\n                                headings.map(heading => {\n                                    \n                                    return (\n                                        <div key={list[heading]} className={styles.tb} style={{width: `${100/headings.length}%`, color: list.rowColor }}>\n                                            {list[heading]}\n                                        </div>\n                                    )\n                                })\n                            }\n                        </div>\n                    )\n                })\n            }\n        </div>\n    )\n}\n\n\nexport default Table;","import { useState, useEffect, useCallback } from 'react';\nimport axios, { AxiosRequestConfig, AxiosResponse, AxiosError, CancelTokenSource} from 'axios';\n\ninterface useApiProps {\n    url: string,\n    options?: AxiosRequestConfig,\n    fetch?: boolean\n}\n\ntype useApiOutput<T> = [\n    T | null,\n    AxiosError | null,\n    boolean,\n    () => void,\n    (() => void) | undefined\n]\n\nfunction useApi<T>({url, options = { method: 'GET'}, fetch = true}: useApiProps): useApiOutput<T>{\n\n    const [ response, setResponse ] = useState<T | null>(null);\n    const [ error, setError ] = useState<AxiosError | null>(null);\n    const [ loading, setLoading ] = useState<boolean>(fetch);\n    const [ cancel, setCancel ] = useState<CancelTokenSource | null>(null);\n    const [ shouldFetch, setShouldFetch ] = useState<boolean>(fetch);\n    const [ fetchAgain, setFetchAgain ] = useState<boolean>(false)\n\n    const doFetch = useCallback(() => {\n        setShouldFetch(true);\n        setLoading(true);\n        setFetchAgain(prev => !prev);\n    },[])\n\n    useEffect(() => {\n        const source = axios.CancelToken.source();\n        setCancel(source);\n        if(shouldFetch){\n            axios(url,{\n                ...options,\n                cancelToken: source.token\n            }).then((res: AxiosResponse) => {\n                setResponse(res.data)\n                setLoading(false)\n            }).catch((error) => {\n                if(!axios.isCancel(error)){\n                    setError(error)\n                    setLoading(false)\n                }\n            })\n        }\n        \n        return () => {\n            source.cancel(\"API Request was cancelled!\")\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[shouldFetch, fetchAgain])\n\n    return [ response, error, loading, doFetch, cancel?.cancel ]\n}\n\nexport default useApi;"],"names":["_postsData$map","navigate","useNavigate","_useApi","useApi","url","_useApi2","_slicedToArray","postsData","postsDataError","postsDataLoading","tableData","map","_ref","_id","userId","postedAt","status","id","slice","time","Date","toLocaleString","onClick","concat","_jsx","className","styles","children","Loading","color","ErrorMessage","text","Table","headings","datas","_ref$size","size","_ref$text","src","require","_jsxs","alt","style","maxWidth","maxHeight","fontSize","heading","width","length","list","rowColor","_ref$options","options","method","_ref$fetch","fetch","_useState","useState","_useState2","response","setResponse","_useState3","_useState4","error","setError","_useState5","_useState6","loading","setLoading","_useState7","_useState8","cancel","setCancel","_useState9","_useState10","shouldFetch","setShouldFetch","_useState11","_useState12","fetchAgain","setFetchAgain","doFetch","useCallback","prev","useEffect","source","axios","_objectSpread","cancelToken","token","then","res","data","catch"],"sourceRoot":""}